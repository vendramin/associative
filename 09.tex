\section{Lecture: Week 9}
\label{09}

\subsection{Local rings}

In this section, we will consider arbitrary rings with one. 

\begin{definition}
    \index{Ring!local}
    A ring is said to be \emph{local} if it contains only one maximal left ideal. 
\end{definition}

Division rings are local rings. 

% \begin{exercise}
%     Let $R$ be a commutative ring with one and $P$ be a prime ideal. Let  
%     $S=R\setminus P$. Then the localization $S^{-1}R$ is a local ring with maximal ideal $S^{-1}P$. 
% \end{exercise}

\begin{theorem}
\label{thm:local}
    Let $R$ be a ring and $I=R\setminus\mathcal{U}(R)$. The following
    statements are equivalent:
    \begin{enumerate}
        \item $R$ is local.
        \item $R/J(R)$ is a division ring.
        \item $I=J(R)$.
        \item $I$ is an ideal of $R$.
    \end{enumerate}
\end{theorem}

\begin{proof}
    We first prove $1)\implies2)$. Let $M$ be the maximal left ideal of $R$. Then $J(R)=M$. 
    Let $x\not\in M$. Then $R=Rx+M$, so $1=rx+m$ for some $r\in R$ and $m\in M$. Thus  
    $r+M$ is a left inverse of $x+M$. In particular, 
    $r\not\in M$. Since $R=Rr+M$, there exists $y\in R$ such that $1=yr$. Therefore
    $y+M$ is a left inverse of $r+M$. Thus 
    \begin{align*}
    y+M&=(y+M)(1+M)=(y+M)(r+M)(x+M)\\
    &=(yr+M)(x+M)=(1+M)(x+M)=x+M
    \end{align*}
    and hence $x+M$ is invertible. 

    Now we prove $2)\implies3)$. Clearly $J(R)\subseteq I$. 
    
    Conversely, let $x\in I$. If $x\not\in J(R)$, then
    $x+J(R)\ne J(R)$. Since $R/J(R)$ is a division ring, 
    $x+J(R)\in\mathcal{U}(R/J(R))$. In particular, $1-xy\in J(R)$ and hence 
    $xy=1-(1-xy)\in\mathcal{U}(R)$. Thus $1=(xy)z=x(yz)$ for some $z\in R$ and therefore $x\not\in I$, a contradiction. 
    
    It is trivial that $3)\implies4)$. 

    Finally, we prove $4)\implies 1)$. 
    Let $M$ be a maximal left ideal of $R$. Then $M\subseteq I$. Since $M$ 
    is maximal and $I$ is in particular a left ideal of $R$, 
    it follows that $M=I$. 
\end{proof}

\begin{definition}
    \index{Idempotent}
    An element $x$ of a ring is said to be \emph{idempotent} 
    if $x^2=x$.   
\end{definition}

\index{Trivial idempotent}
Examples of idempotents are 0 and 1. 
An idempotent $x$ is said to be \emph{non-trivial} if $x\not\in\{0,1\}$. 

\begin{exercise}
\label{xca:idempotents_modpm}
    Let $p$ be a prime number and $m>0$. 
    Prove that the only idempotents of $\Z/p^m$ are 0 and 1. 
\end{exercise}


\begin{exercise}
    \label{xca:idempotents_modn}
    How many idempotent does $\Z/n$ have?
\end{exercise}

\begin{exercise}
\label{xca:lifting_idempotents}
    Let $R$ be a ring with one and $I$ be an ideal of $R$. 
    We say that an idempotent $x\in R/I$ can be lifted if $x=e+I$ for
    some idempotent $e$ of $R$. 
    Prove that if every element of $I$ is nilpotent, then every 
    idempotent of $R/I$ can be lifted. 
\end{exercise}

The previous exercise shows that if $R$ is left artinian, 
every idempotent of $R/J(R)$ can be lifted to $R$. 

\begin{lemma}
\label{lem:J(R)_nil}
    Let $R$ be a left artinian ring. Then $J(R)$ is nil. 
\end{lemma}

\begin{proof}
    Let $x\in J(R)$. The sequence $Rx\supseteq Rx^2\supseteq\cdots$ stabilizes, so
    $Rx^n=Rx^{n+1}$ for some $n$. In particular, there exists $r\in R$ 
    such that $x^n=rx^{n+1}$. This implies that $(1-rx)x^n=0$. Since $x\in J(R)$, 
    the element $1-rx$ is invertible. Hence $x^n=0$.  
\end{proof}

\begin{theorem}
\label{thm:local_idempotent}
    Let $R$ be a left artinian ring. Then $R$ is local if and only if 
    $R$ has no non-trivial idempotents. 
\end{theorem}

\begin{proof}
    Let us first prove $\implies$. For this implication, we do not need to use that 
    $R$ is left artinian. Let $x\in R$ be an idempotent. Then $x(1-x)=0$. If $x\in\mathcal{U}(R)$, then 
    $x=1$. If $1-x\in\mathcal{U}(R)$, then $x=0$. If $x\not\in \mathcal{U}(R)$ and $1-x\not\in\mathcal{U}(R)$, 
    then, since $R\setminus\mathcal{U}(R)$ is an ideal of $R$, 
    it follows that 
    $1=x+1-x\not\in\mathcal{U}(R)$, a contradiction. 

    Now we prove $\impliedby$. By the previous lemma, $J(R)$ is nil. 
    By the previous exercise, every idempotent of $R/J(R)$ can be lifted. Thus $R/J(R)$ has 
    no non-trivial idempotents. On the other hand, by Artin--Wedderburn theorem, 
    \[
    R/J(R)\simeq\prod_{i=1}^kM_{n_i}(D_i)
    \]
    for some $n_1,\dots,n_k\geq1$ and division rings $D_1,\dots,D_k$. Then 
    $k=n_1=1$, as $R/J(R)$ has no non-trivial idempotents. Since $R/J(R)$ is a division ring, 
    $R$ is local by the previous theorem. 
\end{proof}

\begin{theorem}
    The center of a local ring is local. 
\end{theorem}

\begin{proof}
    Let $R$ be a local ring. By Theorem \ref{thm:local}, $J(R)=R\setminus\mathcal{U}(R)$.  
    We need to prove that $Z(R)\setminus\mathcal{U}(Z(R))=J(Z(R))$. 
    We first note that
    \begin{equation}
    \label{eq:U(Z(R))}
        \mathcal{U}(Z(R))=Z(R)\cap\mathcal{U}(R).
    \end{equation}
    
    We claim that $Z(R)\cap J(R)\subseteq J(Z(R))$.  
    Let $x\in Z(R)\cap J(R)$. Let $z\in Z(R)$. Since $x\in J(R)$, $1-zx\in\mathcal{U}(R)$.
    Moreover, $1-zx\in Z(R)$. Thus 
    \[
    1-zx\in Z(R)\cap\mathcal{U}(R)=\mathcal{U}(Z(R)).
    \]
    Hence $x\in J(Z(R))$. 

    To prove the theorem it is enough to show that 
    $Z(R)\setminus\mathcal{U}(Z(R))=J(Z(R))$. Let us prove the non-trivial inclusion. 
    Let $x\in Z(R)\setminus\mathcal{U}(Z(R))$.  Then 
    \eqref{eq:U(Z(R))} implies that 
    $x\not\in\mathcal{U}(R)$. 
    By Theorem \ref{thm:local}, 
    $x\in J(R)$. Then $x\in J(R)\cap Z(R)\subseteq J(Z(R))$. 
\end{proof}

\begin{exercise}
\label{eq:local_center}
    Let $R$ be a local ring. Prove that 
    $Z(R)\cap J(R)=J(Z(R))$.  
\end{exercise}

\begin{exercise}
\label{xca:local_right}
    Prove that a ring is local if and only if it contains only one maximal right ideal.
\end{exercise}

\begin{exercise}
\label{xca:non_local1}
    Find a non-local ring with a unique maximal ideal. 
\end{exercise}

% M_n(\C)

\begin{exercise}
\label{xca:non_local2}
    Let $R$ be a ring with at least three elements. 
    If $|\mathcal{U}(R)|=1$, then $R$ is not local. 
\end{exercise}


\begin{exercise}
\label{xca:VonNeumann_local}
\index{Ring!Von Neumann regular}
    A ring $R$ is said to be \emph{Von Neumann regular} if  
    for every non-zero $r\in R$, $r=rxr$ for some $x\in R$. 
    Prove that a local Von Neumann ring is a division ring. 
\end{exercise}

\begin{exercise}
\label{xca:nilp_or_unit}
    Let $R$ be a ring such that every element of $R$ is either 
    nilpotent or a unit. Prove that $R$ is local. 
\end{exercise}

\begin{bonus}
\label{xca:semilocal}
  \index{Ring!semilocal}
    A ring $R$ is said to be \emph{semilocal} if $R/J(R)$ is left artinian. 
    Prove the following statements:
    \begin{enumerate}
        \item Every local ring is semilocal.
        \item $R$ is semilocal if and only if $R/J(R)$ is semisimple.
        \item If $R$ has finitely many maximal left ideals, then $R$ is semilocal. 
        \item If $R_1,\dots,R_k$ are rings, then $\bigoplus_{i=1}^k R_i$ is semilocal
            if and only if each $R_i$ is semilocal. 
    \end{enumerate}
\end{bonus}

\begin{bonus}
\label{xca:semilocal_commutative}
    Let $R$ be a ring such that $R/J(R)$ is commutative. Prove
    that $R$ is semilocal if and only if $R$ has finitely many maximal ideals. 
\end{bonus}


% \subsection{*Hurewicz' theorem}

% \begin{theorem}[Hurewicz]
%     \label{thm:Hurewicz}
%     \index{Hurewicz' theorem}
%     Let $G$ be a group and $I$ be the augmentation ideal of $\Z[G]$. 
%     Then $G/[G,G]\simeq I/I^2$ as (abelian) groups. 
% \end{theorem}

% \begin{proof}
%     Let $\varphi\colon G\to I/I^2$, $g\mapsto g-1_G+I^2$. Since $g-1_G\in I$ for all $g\in G$, $\varphi$ is well-defined. The map $\varphi$ is a group homomorphism. Since 
%     $(g-1_G)(h-1_G)\in I^2$, 
%     \begin{align*}
%     \varphi(gh) &= gh-1_G+I^2\\
%     &=gh-1_G-(g-1_G)(h-1_G)+I^2+I^2\\
%     &=g-1_G+h-1_G+I^2\\
%     &=\varphi(g)+\varphi(h)
%     \end{align*}
%     holds for all $g,h\in G$. 

%     Since $[G,G]\subseteq\ker\varphi$, there exists a group homomorphism
%     \[
%     \overline{\varphi}\colon G/[G,G]\to I/I^2,\quad 
%     g[G,G]\mapsto g-1_G+I^2.
%     \]
%     We claim that $\overline{\varphi}$ is an isomorphism. 
%     Let us construct the inverse of $\overline{\varphi}$. Let 
%     \[
%     \psi\colon I\to G/[G,G],\quad 
%     \sum_{g\in G}m_g(g-1_G)\mapsto \left(\prod_{g\in G}g^{m_g}\right)[G,G].
%     \]
%     Since $G/[G,G]$ is abelian, the map $\psi$ is well-defined, that is
%     the order of the factors in $\prod_{g\in G}g^{m_g}$ does not matter. Note that 
%     $I^2\subseteq\ker\psi$, as 
%     $\{(g-1_G)(h-1_G):g,h\in G\}$ generates the additive group $I^2$ 
%     and 
%     \begin{align*}
%         \psi((g-1_G)(h-1_G))&=\psi( (gh-1_G)-(g-1_G)-(h-1_G))\\
%         &=(ghg^{-1}h^{-1})[G,G]\\
%         &=[G,G].
%     \end{align*}
%     Therefore there exists a group homomorphism
%     \[
%     \overline{\psi}\colon I/I^2\to G/[G,G],\quad 
%     \sum_{g\in G}m_g(g-1_G)+I^2\mapsto \left(\prod_{g\in G}g^{m_g}\right)[G,G].
%     \]
%     A direct calculation shows that $\overline{\psi}$ is the inverse 
%     of $\overline{\varphi}$. 
% \end{proof}


% \subsection{*When a group algebra is reduced?}
% \
% \begin{exercise}
%     Is the ring $\C[\Z/2]$ reduced? 
% \end{exercise}

% % Let $G=\langle g:g^2=1\rangle$. If $(a+bg)^2=0$, then
% % $(a^2+b^2)+(2ab)g=0$. Thus $a=b=0$. 

% \begin{problem}
% \label{prob:reduced}
%     Let $G$ be a torsion-free group. Is
%     $K[G]$ is reduced?
% \end{problem}

% Problem \ref{prob:reduced} is related to other important
% open problems about group algebras 
% (e.g. zero-divisors, units, 
% indempotents and semisimplicity of group
% rings).

% \begin{exercise}
% \label{xca:reduced_central}
%     Prove that idempotents of reduced rings are central. 
% \end{exercise}

% The previous exercise is used to solve the following problem.

% \begin{exercise}
% \label{xca:x^3=x}
%     Let $R$ be a ring such that $x^3=x$ for all $x\in R$. Prove that
%     $R$ is commutative. 
% \end{exercise}

% Exercise \ref{xca:x^3=x} is hard. 
% Even harder is the following exercise:

% \begin{exercise}
% \label{xca:x^4=x}
%     Let $R$ be a ring such that $x^4=x$ for all $x\in R$. Prove
%     that $R$ is commutative. 
% \end{exercise}

% %Other exercises about reduced rings. 

% %\begin{exercise}
% %\label{xca:reduced}
% %    Prove that a ring is reduced if 
% %    and only it has no non-zero nilpotent elements. 
% %\end{exercise}

% \begin{exercise}
% \label{xca:reduced=>semiprime}
%     Reduced rings are semiprime.
% \end{exercise}
 
% \begin{theorem}
% \label{thm:reduced}
%     Let $K$ be a field and $G$ be a group. If $K[G]$
%     is reduced, then every finite subgroup of $G$ is normal. 
% \end{theorem}

% \begin{proof}
%     Let $H=\{h_1,\dots,h_n\}$ be a finite normal subgroup of $G$. 
%     We claim that $n=|H|$ is invertible in $K$. If $\ch K=0$, this 
%     is clear. If $\ch K=p>0$ and $n$ is not invertible in $K$, 
%     then $p$ divides $n=|H|$. By Cauchy's theorem, 
%     there exists an element $h\in H$ of order $n$, that is 
%     $|h|=n$. Since $(1-h)^p=1-h^p=0$ and $K[G]$ is reduced,
%     $h=1$, a contradiction. 
    
%     Let $\alpha=\frac{1}{n}\sum_{i=1}^nh_i\in K[G]$. Then
%     \[
%     \alpha^2=\frac{1}{n^2}\sum_{i=1}^n\sum_{j=1}^nh_ih_j
%     =\frac{1}{n^2}\sum_{i=1}^nn\alpha=\alpha.
%     \]
%     Thus $\alpha$ is idempotent. As idempotent 
%     element of reduced rings are central (Exercise \ref{xca:reduced_central}), 
%     $g\alpha g^{-1}=\alpha$ for all $g\in G$. If $g\in G$, 
%     then 
%     \[
%     \sum_{i=1}^n gh_ig^{-1}=\sum_{i=1}^n h_i.
%     \]
%     It follows that $H$ is normal in $G$, 
%     as for each $i\in\{1,\dots,n\}$ 
%     there exists $j\in\{1,\dots,n\}$ such that 
%     $gh_ig^{-1}=h_j\in H$. 
% \end{proof}

% \begin{example}
%     If $K$ is a field, then $K[\Sym_3]$ is not reduced. 
%     In fact, 
%     if 
%     \[
%     \alpha=(12)+(123)-(132)-(13),
%     \]
%     then 
%     $\alpha^2=0$. 
% \end{example}

% \begin{exercise}
%     Prove that the converse of Theorem \ref{thm:reduced} 
%     does not hold. 
% \end{exercise}

\subsection{Gustafson's theorem}

In 1905, Schur proved that the maximum number of linearly independent 
$n\times n$ complex matrices is $\lfloor n^2/4\rfloor+1$, where $x\mapsto \lfloor x\rfloor$ is the 
greatest integer function. We will prove Schur's theorem by representation-theoretic methods.

\begin{theorem}[Gustafson]
\index{Gustafson's theorem}
\label{thm:Gustafson}
    Let $R$ be a complex commutative finite-dimensional algebra 
    and $M$ be a faithful $n$-dimensional $R$-module. Then
    \[
    \dim_{\C}R\leq\left\lfloor\frac{n^2}{4}\right\rfloor+1.
    \]
\end{theorem}

Recall that the \emph{floor function} is the function that takes an element $x\in\R$ 
and returns 
\[
    \lfloor x\rfloor = \max\{m\in\Z:m\geq x\}.
\]
Thus $x-1<\lfloor x\rfloor\leq x$. 

\begin{exercise}
    \label{xca:floor}
    For $n\geq1$, let $a_n=\lfloor n^2/4\rfloor+1$. Then 
    \[
    a_{n_1+\cdots+n_k}\geq a_{n_1}+\cdots+a_{n_k}.
    \]
\end{exercise}

% We proceed by induction on $n$. 
% Let us show that $a_{n+m}\geq a_n+a_m$ for all $n,m\geq1$. 
% Assume first that $n=2k$ and $m=2l+1$. On the one hand, $a_{n+m}=(k+l)^2+(k+l)+1$. On the other hand, 
% $a_n+a_m=k^2+l^2+l+2$. Then the inequality clearly holds. The other cases are similar. 

We now need some exercises on commutative artinian 
unitary rings.

\begin{exercise}
    Let $R$ be a commutative artinian unitary ring. 
    Prove that $R$ has finitely many maximal ideals. 
\end{exercise}

% Let $\mathcal{S}$ be the set of all finite intersections of maximal ideals of $R$. 
% Since $R$ is artinian, $\mathcal{S}$ admits a minimal element, say 
% I=M_1\cap\cdots\cap M_k$, for maximal ideals $M_1,\dots,M_k$. Let $M$ be a maximal ideal of $R$.
% Since $I\cap M\in\mathcal{S}$, $I\subseteq I\cap M\subseteq M$ by the minimality of $I$. 
% We claim that $M_i\subseteq M$ for some $i\in\{1,\dots,k\}$. If 
% $M_i\not\subseteq M$ for all $i\in\{1,\dots,k\}$, then 
% $M_1\cap\cdots M_k$

\begin{lemma}
\label{lem:artinian_local}
    Let $R$ be a commutative artinian unitary ring. Then 
    $R\simeq R_1\times\cdots\times R_k$ for local rings $R_1,\dots,R_k$. 
\end{lemma}


\begin{proof}
    By Lemma~\ref{lem:Rartinian_finite_primitives}, $R$ has finitely many primitive ideals, say 
    $I_1,\dots,I_k$. Note that $J(R)=I_1\cap\cdots\cap I_k$. 
    Since $R$ is artinian, $J(R)$ is nilpotent by Theorem~\ref{thm:Jnilpotente}. Thus
    \[
    \{0\}=J(R)^m=(I_1\cap\cdots\cap I_k)^m=I_1^m\cap\cdots\cap I_k^m
    \]
    for some $m\geq1$. By the Chinese remainder theorem, 
    \[
    R\simeq R/(I_1^m\cdots I_k^m)\simeq \prod_{j=1}^k R/I_j^m.
    \]
    For $j\in\{1,\dots,k\}$, let $R_j=R/I_j^m$ and 
    $\pi_j\colon R\to R_j$ be the canonical map. 
    We claim that each $R_j$ is a local ring 
    with maximal ideal $\pi(I_j)$. Note that $I_j$ is a maximal ideal by 
    Lemma~\ref{lem:primitive=>maximal}. 
    By the correspondence theorem, the maximal ideals of $R_j$ are in bijective 
    correspondence with
    the maximal ideals of $R$ containing $I_j^m$. 
    Let $M$ be a maximal ideal of $R_j$. We want to prove that $M=\pi(I_j)$. 
    If $x\in I_j$, then $x^m\in I_j^m\subseteq\pi^{-1}(M)$. Since $\pi^{-1}(M)$ is a maximal ideal, 
    it is a prime ideal of $R$. Thus $x\in\pi^{-1}(M)$, that is $\pi(x)\in M$. 
    Since $\pi(I_j)\subseteq M$ and $\pi(I_j)$ is a maximal ideal of $R$, it follows
    that $\pi(I_j)=M$. 
\end{proof}

We also need the following very useful lemma:

\begin{lemma}[Nakayama]
	\label{lem:Nakayama}
	\index{Nakayama's lemma}
	Let $R$ be a unitary ring and $M$ be 
    a finitely generated $R$-module. 
    If $J(R)\cdot M=M$, then $M=\{0\}$.
\end{lemma}

\begin{proof}
	Assume that $M$ is generated by 
    $x_1,\dots,x_n$. Since $x_n\in M=J(R)\cdot M$, 
	there exist $r_1,\dots,r_n\in J(R)$ such that  $x_n=r_1\cdot x_1+\cdots+r_n\cdot x_n$, that is 
	$(1-r_n)x_n=\sum_{j=1}^{n-1}r_j\cdot x_j$. 
	Since $1-r_n$ is invertible, there exists 
    $s\in R$ such that $s(1-r_n)=1$. Then
	$x_n=\sum_{j=1}^{n-1}(sr_j)\cdot x_j$ 
	and hence $M$ is generated by $x_1,\dots,x_{n-1}$. After repeating this procedure sufficiently many times (finitely many times), one gets $M=\{0\}$.
\end{proof}

\begin{exercise}
\label{xca:Nakayama}
    Let $R$ be a unitary ring and $M$ be a finitely
    generated module. 
    \begin{enumerate}
        \item If $N$ be a submodule of $M$ such that $J(R)\cdot M/N=M/N$, then $M=N$. 
        \item If $\pi\colon M\to M/(J(R)\cdot M)$ be the canonical map and 
            $M/(J(R)\cdot M)$ is generated by $\{\pi(m_1),\dots,\pi(m_k)\}$ for some 
            $m_1,\dots,m_k\in M$, then $M$ is generated by $\{m_1,\dots,m_k\}$. 
    \end{enumerate}
\end{exercise}

\index{Central idempotent}
Recall that an idempotent of a ring $R$ is an element $e\in R$ such that $e^2=e$. Two idempotents 
$e$ and $f$ are said to be \emph{orthogonal} if $ef=fe=0$. 

\begin{exercise}
    \label{xca:idempotents_decomposition}
    Let $R$ be a unitary ring. Prove that the following statements are equivalent: 
    \begin{enumerate}
%        \item $R\simeq R_1\times\cdots\times R_n$ as a product of rings $R_1,\dots,R_n$.
        \item $R = I_1 \oplus \ldots \oplus I_n$ as a direct sum of left ideals $I_1,\dots,I_n$ of $R$. 
        \item $1=e_1+\cdots+e_n$ for some orthogonal idempotents $e_1,\dots,e_n$.
    \end{enumerate}
\end{exercise}


We are ready to prove Gustafson's theorem. 

\begin{proof}[Proof of Theorem~\ref{thm:Gustafson}]
    Assume first that $R$ is a local ring and let $I$ be its maximal ideal. Then 
    $F=R/I$ is a field. Note that $F$ is a finite extension of $\C$, so it is an algebraic extension. 
    Since $\C$ is algebraically closed, $F\simeq\C$. Moreover, 
    $M/(I\cdot M)$ is a vector space over $\C$. 
    % (the 
    % operation $(R/I)\times M\to M$, $(r+I,m)\mapsto 
    % (r+I)\cdot m=r\cdot m$, is well-defined because $I\cdot M=\{0\}$). 
    Let $k\in\Z$ be such that 
    $k=\dim (I\cdot M)$. Then 
    $\dim M/(I\cdot M)=n-k$. Let  
    \[
        \{m_1+I\cdot M,\dots,m_{n-k} +I\cdot M\}
    \]
    be a basis of $M/(I\cdot M)$. 
    Since $I=J(R)$, it follows from Exercise~\ref{xca:Nakayama} that $M$ is generated by 
    $\{m_1,\dots,m_{n-k}\}$. Let $V$ be the complex vector space 
    generated by $m_1,\dots,m_{n-k}$ and $W$ be the set of complex linear maps 
    $V\to I\cdot M$. Then 
    \[
    \dim_{\C}W=\dim_{\C}(I\cdot M)\dim_{\C}V\leq k(n-k).
    \]
    Let $f\colon I\to W$, $r\mapsto (v\mapsto r\cdot v)$. Then $f$ is a well-defined complex linear map. 
    
    We claim that 
    $f$ is injective: if $r\in\ker f$, then $f(r)=0$. Thus $r\cdot v=0$ for all $v\in V$. In particular, since 
    $r\cdot m_i=0$ for all $i\in\{1,\dots,n-k\}$, it follows that $r\cdot m=0$ for all $m\in M$. 
    Since $M$ is faithful, $r=0$. 

    Since $f$ is injective, 
    \[
    \dim_{\C} I\leq\dim_{\C}W\leq k(n-k)=\frac{n^2}{4}-\left(\frac{n}{2}-k\right)^2\leq\frac{n^2}{4}.
    \]
    Hence $\dim_{\C}I\leq\lfloor n^2/4\rfloor$. Now 
    \[
    \dim_{\C}R=\dim_{\C}I+\dim_{\C}(R/I)\leq \left\lfloor n^2/4\right\rfloor+1. 
    \]

    Assume now that $R$ is a commutative artinian ring. By Lemma~\ref{lem:artinian_local}, we may assume
    that $R=\bigoplus_{i=1}^k R_i$, where $R_1,\dots,R_k$ are local artinian rings and ideals of $R$. Since $R$ is unitary, $1=e_1+\cdots+e_k$ 
    for orthogonal idempotents $e_1\in R_1,\dots,e_k\in R_k$ 
    (see Exercise~\ref{xca:idempotents_decomposition}). 
    In particular,  
    $M=\sum_{j=1}^k e_j\cdot M$. 

    We claim that $M=\bigoplus_{j=1}^k e_j\cdot M$. For example, let $x\in e_1\cdot M\cap (e_2\cdot M+\cdots+e_k\cdot M)$. Then 
    $x=e_1\cdot m_1=e_2\cdot m_2+\cdots+e_k\cdot m_k$ 
    for some $m_1,\dots,m_k\in M$. Since $e_1^2=e_1$ and 
    $e_1e_j=0$ for all $j\in\{2,\dots,k\}$, we obtain that 
    \begin{align*}
        &e_1\cdot x=e_1^2\cdot m_1=e_1\cdot m_1=x,\\
        &e_1\cdot x=(e_1e_2)\cdot m_2+\cdots+(e_1e_k)\cdot m_k=0.
    \end{align*}
    Then $x=0$. In this way we prove that $M=\bigoplus_{j=1}^k e_j\cdot M$. 
    
    Each $e_j\cdot M$ is a faithful $R_j$-module. It is trivial to see that each 
    $e_j\cdot M$ is an $R_j$-module. 
    Let us show that, for example, $e_1\cdot M$ is faithful. Let $r\in\Ann_{R_1}(e_1\cdot M)$. Then
    \[
    (re_1)\cdot m=r\cdot (e_1\cdot m)=0
    \]
    for all $m\in M$. Thus $re_1=0$, as $re_1\in\Ann_R(M)=\{0\}$ since $M$ is faithful. Moreover, 
    \[
    r=r1=r(e_1+\cdots+e_k)=re_1+re_2+\cdots+re_k=re_2+\cdots+re_k.
    \]
    Thus $r\in R_1\cap (R_2+\cdots+R_k)=\{0\}$. Similarly one proves that each $e_j\cdot M$ is a faithful $R_j$-module. 
    For $j\in\{1,\dots,k\}$, let $n_j=\dim_{\C}e_j\cdot M$. Then 
    \[
    n=\dim_{\C}M=\sum_{j=1}^k\dim_{\C}(e_j\cdot M)=\sum_{j=1}^kn_j.
    \]
    Using Exercise~\ref{xca:floor} and the previous case, 
    \begin{align*}
    \dim_{\C}R&=\sum_{j=1}^k\dim_{\C}R_j
    \leq\sum_{j=1}^k \left(\left\lfloor \frac{n_j^2}{4}\right\rfloor+1\right)\\
    &\leq\left\lfloor\frac{(n_1+\cdots+n_k)^2}{4}\right\rfloor+1
    =\left\lfloor\frac{n^2}{4}\right\rfloor+1.\qedhere     
    \end{align*}
\end{proof}

The proof of Gustafson's theorem we presented 
can be easily adapted for arbitrary algebraically closed fields. Using the technique of \emph{extensions 
of scalars} (see Theorem~\ref{thm:extensions_scalars}), 
we can get the result for other fields. Let $K$ be a field and $\overline{K}$ be its algebraic closure. 
If $R$ is a finite-dimensional commutative 
$K$-algebra and $M$ is a faithful $R$-module with $\dim_KM=n<\infty$, then 
$\overline{R}=R\otimes_K\overline{K}$ is a commutative $\overline{K}$-algebra and
$\dim_{\overline{K}}\overline{R}=\dim_KR$. Moreover, $\overline{M}=M\otimes_K\overline{K}$ is a faithful
$\overline{R}$-module with 
$\dim_{\overline{K}}\overline{M}=\dim_KM$. By Gustafson's theorem, 
\[
\dim_KR=\dim_{\overline{K}}\overline{R}\leq\left\lfloor\frac{n^2}{4}\right\rfloor+1.
\]

We now present an application. For that purpose, we need a lemma.

\begin{lemma}
\label{lem:Gustafson}
    Let $\{A_1,\dots,A_m\}\subseteq M_n(\C)$ be a maximal linearly independent set of
    commuting matrices. If $R$ is the complex vector space
    generated by $\{A_1,\dots,A_m\}$, then $R$ 
    is a commutative finite-dimensional complex 
    algebra and $\C^n$ is a faithful module. 
\end{lemma}

\begin{proof}
    Let $B\in M_n(\C)$ be such that $BA_i=A_iB$ for all $i\in\{1,\dots,m\}$. 
    The set $\{A_1,\dots,A_m,B\}$ is linearly dependent, by the 
    maximality of $\{A_1,\dots,A_m\}$. There exist $\mu,\lambda_1,\dots,\lambda_{m}\in\C$ not all zero
    such that 
    \[
    \lambda_1A_1+\cdots+\lambda_mA_m+\mu B=0.
    \]
    Taking $B=A_iA_j$ for $i,j\in\{1,\dots,m\}$ we see that 
    all products of the form $A_iA_j$ belong to $R$. Moreover, taking $B=I$ (the $n\times n$ 
    identity matrix), we see that $I\in R$. A direct calculation now shows that 
    $R$ is a commutative finite-dimensional complex algebra.

    To see that $\C^n$ is a faithful $R$-module, let 
    \[
    A=\begin{pmatrix}
      a_{11} & a_{12} & \cdots & a_{1n}\\
      a_{21} & a_{22} & \cdots & a_{2n}\\
      \vdots & \vdots & \ddots & \vdots\\
      a_{n1} & a_{n2} & \cdots & a_{nn}
    \end{pmatrix}\in\Ann_R(\C^n).
    \]
    Then $Av=0$ for all $v\in\C^n$.  In particular, 
    \[
    \colvec{4}{a_{11}}{a_{21}}{\vdots}{a_{n1}}=A\colvec{4}{1}{0}{\vdots}{0}=\colvec{4}{0}{0}{\vdots}{0}.
    \]
    Thus the first column of $Av$ is zero. Similarly one proves that 
    all the other columns of $A$ need to be zero. 
\end{proof}


\begin{theorem}[Schur]
\label{thm:Schur_matrices}
\index{Schur's theorem}
    Let $S$ be a linearly independent set of commutatives matrices of $M_n(\C)$. Then
    \[
    |S|\leq \left\lfloor\frac{n^2}{4}\right\rfloor+1.
    \]
\end{theorem}

\begin{proof}
    Let $T=\{A_1,\dots,A_m\}$ be a maximal set of linearly independent commuting $n\times n$ complex matrices. Let $R$ 
    be the complex vector space generated by $A_1,\dots,A_m$. By Lemma~\ref{lem:Gustafson}, 
    $R$ is a finite-dimensional commutative
    complex algebra and $M=\C^n$ is a faithful $R$-module. Then
    \[
    |S|\leq |T|=m=\dim_{\C}R\leq\left\lfloor\frac{n^2}{4}\right\rfloor+1,
    \]
    by Gustafson's theorem. 
\end{proof}

There are other proofs of Schur's inequality. For example, Mirzakhani found a short and 
elementary proof, see~\cite{zbMATH01234865}.

